import{c as e,I as a,a5 as s,a6 as l,a7 as r,s as t,b as o,n,y as c,r as u,o as i,f as d,i as w,w as m,h as v,t as f,e as p,A as y,C as b,D as P,v as g}from"./index-DlcaZKbg.js";import{m as h}from"./crypto-dkjlSuvS.js";import{u as O}from"./user-CxSvkcge.js";function j(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),l.forEach((function(a){x(e,a,s[a])}))}return e}function x(e,a,s){return a in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}var k=function(l,r){var t=j({},l,r.attrs);return e(a,j({},t,{icon:s}),null)};function _(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),l.forEach((function(a){C(e,a,s[a])}))}return e}function C(e,a,s){return a in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}k.displayName="CheckCircleFilled",k.inheritAttrs=!1;var S=function(s,r){var t=_({},s,r.attrs);return e(a,_({},t,{icon:l}),null)};S.displayName="CloseCircleFilled",S.inheritAttrs=!1;const A={class:"p-4 h-full"},D={class:"h-full bg-white p-4"},M=w("div",{class:"common-title"},"修改密码",-1),U={key:0,style:{color:"#00cc00"}},E={key:1,style:{color:"#f01000"}},F={key:0,style:{color:"#00cc00"}},L={key:1,style:{color:"#f01000"}},N={class:""},z={class:"text-xs"},B={key:0,style:{color:"#00cc00"}},I={key:1,style:{color:"#f01000"}},V={class:"w-1/2 text-center"},Z={__name:"resetPassword",setup(a){const s=r(),l=t({account:o("account").value,oldPassword:"",newPassword:"",confirmPassword:""}),j=async()=>{P.confirm({title:"提示",content:"确定要修改密码吗？",onOk:async()=>{(await O({oldPassword:h(l.oldPassword).toString(),newPassword:h(l.newPassword).toString()})).code||g.success("修改成功,即将返回登录页",1,(()=>{s.redirect({path:"/"})}))}})},x=n(!1),_=()=>{const e=o("p").value;x.value=h(form.password).toString()===e},C=n(!1),Z=n(!1),$=n(!1),q=n(!1),G=n(!1),H=c((()=>C.value&&Z.value&&$.value&&q.value&&G.value)),J=c((()=>l.confirmPassword&&l.newPassword===l.confirmPassword)),K=()=>{C.value=l.newPassword.length>=6&&l.newPassword.length<=16,Z.value=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/im.test(l.newPassword),$.value=/\d/im.test(l.newPassword),q.value=/[A-Z]/m.test(l.newPassword),G.value=/[a-z]/m.test(l.newPassword)};return(a,s)=>{const r=u("a-form-item"),t=u("a-input-password"),o=u("a-form"),n=u("a-button");return i(),d("div",A,[w("div",D,[M,e(o,{model:l,"label-col":{span:4},"wrapper-col":{span:14},autocomplete:"off"},{default:m((()=>[e(r,{label:"账号名称"},{default:m((()=>[v(f(l.account),1)])),_:1}),e(r,{label:"原密码"},{default:m((()=>[e(t,{value:l.oldPassword,"onUpdate:value":s[0]||(s[0]=e=>l.oldPassword=e),valueModifiers:{trim:!0},style:{width:"350px","margin-right":"16px"},onBlur:_},null,8,["value"]),x.value?(i(),d("span",U,[e(p(k))])):!x.value&&l.oldPassword?(i(),d("span",E,[e(p(S),{class:"mr-2"})])):y("",!0)])),_:1}),e(r,{label:"新密码"},{default:m((()=>[e(t,{value:l.newPassword,"onUpdate:value":s[1]||(s[1]=e=>l.newPassword=e),valueModifiers:{trim:!0},style:{width:"350px","margin-right":"16px","margin-bottom":"4px"},maxLength:"16",onChange:K},null,8,["value"]),H.value?(i(),d("span",F,[e(p(k))])):!H.value&&l.newPassword?(i(),d("span",L,[e(p(S),{class:"mr-2"})])):y("",!0),w("div",N,[w("ul",z,[w("li",{style:b({color:C.value?"#00cc00":"#999"})},[e(p(k),{class:"mr-2"}),v("密码长度为6-16位 ")],4),w("li",{style:b({color:q.value?"#00cc00":"#999"})},[e(p(k),{class:"mr-2"}),v("至少包含一个大写字母 ")],4),w("li",{style:b({color:G.value?"#00cc00":"#999"})},[e(p(k),{class:"mr-2"}),v("至少包含一个小写字母 ")],4),w("li",{style:b({color:$.value?"#00cc00":"#999"})},[e(p(k),{class:"mr-2"}),v("至少包含一个数字 ")],4),w("li",{style:b({color:Z.value?"#00cc00":"#999"})},[e(p(k),{class:"mr-2"}),v("至少包含一个符号 ")],4)])])])),_:1}),e(r,{label:"确认密码"},{default:m((()=>[e(t,{value:l.confirmPassword,"onUpdate:value":s[2]||(s[2]=e=>l.confirmPassword=e),valueModifiers:{trim:!0},style:{width:"350px","margin-right":"16px"},disabled:!H.value,maxLength:"16"},null,8,["value","disabled"]),J.value?(i(),d("span",B,[e(p(k))])):!J.value&&l.confirmPassword?(i(),d("span",I,[e(p(S),{class:"mr-2"})])):y("",!0)])),_:1})])),_:1},8,["model"]),w("div",V,[e(n,{type:"primary",onClick:j,disabled:!x.value||!H.value||!J.value},{default:m((()=>[v(" 提交 ")])),_:1},8,["disabled"])])])])}}};export{Z as default};
